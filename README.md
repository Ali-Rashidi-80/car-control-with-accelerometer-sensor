# پروژه کنترل حرکات ربات با افکت‌های موسیقایی

این پروژه یک سیستم رباتیک پیشرفته مبتنی بر میکروکنترلر است که با استفاده از سنسورهای چندگانه و درایورهای موتور، حرکات دقیق و چندجهتی را پیاده‌سازی می‌کند. همچنین با بهره‌گیری از افکت‌های موسیقایی از طریق بوزر، تغییر حالات حرکتی به شیوه‌ای جذاب و شنیدنی اعلام می‌شود.

---

## ویژگی‌ها

- **تشخیص موانع:**  
  استفاده از سنسور اولتراسونیک جهت اندازه‌گیری فاصله و جلوگیری از برخورد با موانع (با تشخیص فاصله کمتر از 20 سانتی‌متر).

- **کنترل جهت و حرکت:**  
  دریافت داده‌های زاویه‌ای (pitch، roll و yaw) از سنسور GY25 برای تعیین جهت حرکت ربات.

- **فیلتر پایین‌گذر و منطقه بی‌اثر:**  
  صاف‌سازی سیگنال‌های دریافت‌شده با استفاده از فیلتر پایین‌گذر و اعمال منطقه بی‌اثر جهت حذف نویزهای کوچک.

- **تنظیم سرعت:**  
  خواندن ورودی پتانسیومتر جهت تنظیم سرعت موتورها در مقیاس 0 تا 65535.

- **کنترل موتورهای دوگانه:**  
  استفاده از درایور موتور L298 برای کنترل دقیق دو موتور (موتور چپ و راست) به منظور ایجاد حرکات جلو، عقب، چرخش‌های محوری و حرکات مورب.

- **افکت‌های موسیقایی:**  
  پخش ملودی‌های متنوع با بوزر جهت نمایش تغییر حالات حرکتی (حرکت به جلو، عقب، چرخش به چپ/راست و حرکات مورب).

---

## سخت‌افزار مورد نیاز

- **میکروکنترلر:**  
  هر میکروکنترلری که از MicroPython یا CircuitPython پشتیبانی کند.

- **سنسور اولتراسونیک:**  
  جهت اندازه‌گیری فاصله (با استفاده از پین‌های TRIG و ECHO).

- **سنسور GY25:**  
  جهت دریافت داده‌های زاویه‌ای (pitch، roll، yaw).  
  **توجه:** پروژه نیازمند یک ماژول جداگانه به نام `GY25_data` است که تابع `main()` را جهت خواندن داده‌های زاویه‌ای فراهم کند.

- **بوزر:**  
  جهت پخش افکت‌های صوتی به عنوان اعلان‌های حرکتی.

- **پتانسیومتر:**  
  جهت تنظیم سرعت حرکت موتورها.

- **درایور موتور L298:**  
  جهت کنترل دو موتور (موتور چپ و راست).

- **موتورهای DC:**  
  جهت ایجاد حرکت‌های مختلف ربات.

---

## نرم‌افزار مورد نیاز

- **MicroPython یا CircuitPython:**  
  جهت اجرای کد بر روی میکروکنترلر.

- **کتابخانه‌های استاندارد Python:**  
  مانند `machine`, `time`, `math`.

- **ماژول GY25_data:**  
  که باید تابع `main()` را برای دریافت مقادیر pitch، roll و yaw فراهم کند.

---

## راه‌اندازی پروژه

### 1. اتصال سخت‌افزار

- **سنسور اولتراسونیک:**  
  - پین TRIG به پین 28  
  - پین ECHO به پین 27

- **بوزر:**  
  - متصل به پین 10

- **پتانسیومتر:**  
  - متصل به پین 26 (ADC)

- **درایور موتور L298:**  
  - جهت‌های موتورها به پین‌های 4، 5، 6 و 7  
  - PWM موتورها به پین‌های 8 و 9

- **سنسور GY25:**  
  - به میکروکنترلر متصل شده و از طریق ماژول `GY25_data` مورد استفاده قرار می‌گیرد.

### 2. بارگذاری کد

- فایل اصلی کد (به عنوان مثال `main.py`) را به میکروکنترلر خود انتقال دهید.
- در صورت نیاز، پیکربندی پین‌ها و ثابت‌های تعریف‌شده در کد را مطابق با سخت‌افزار خود تغییر دهید.

### 3. اجرای پروژه

- میکروکنترلر را روشن کنید.
- کد به صورت خودکار اجرا شده و در یک حلقه بی‌پایان داده‌های سنسورها را پردازش می‌کند.
- بسته به داده‌های ورودی (سنسور اولتراسونیک، GY25 و پتانسیومتر)، ربات به جهات مختلف حرکت کرده و افکت‌های صوتی مربوط به هر حالت را پخش می‌کند.

---

## توضیحات فنی کد

- **سنسور اولتراسونیک:**  
  تابع `get_distance()` از طریق ارسال پالس و اندازه‌گیری زمان دریافت پالس، فاصله را محاسبه می‌کند.

- **افکت‌های صوتی:**  
  توابع `play_melody()` و `play_sound()` ملودی‌های متنوعی را جهت نمایش تغییر حالت‌های حرکتی (جلو، عقب، چرخش چپ/راست، و حرکات مورب) پخش می‌کنند.

- **کنترل موتورها:**  
  توابع `move_forward()`, `move_backward()`, `turn_left()`, `turn_right()` و توابع مربوط به حرکات مورب (مانند `move_northeast()`) جهت تنظیم جهت و سرعت دقیق موتورها طراحی شده‌اند.

- **فیلتر پایین‌گذر و منطقه بی‌اثر:**  
  با استفاده از فیلتر پایین‌گذر (با ضریب `SMOOTHING_ALPHA`) سیگنال‌های دریافت‌شده صاف شده و با تابع `apply_dead_zone()` مقادیر ناخواسته حذف می‌شوند.

- **حلقه اصلی:**  
  تابع `main()` به‌طور مداوم وضعیت سنسورها را بررسی کرده و بر اساس داده‌های دریافت‌شده، فرمان‌های حرکتی مناسب را به موتورها ارسال می‌کند.

---

## مشارکت و پشتیبانی

- در صورت بروز هرگونه سوال یا نیاز به پشتیبانی، لطفاً از طریق بخش Issues در مخزن گیت‌هاب اقدام کنید.
- اگر تمایل به مشارکت در توسعه این پروژه دارید، درخواست Pull خود را ارسال نمایید.

---

## مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای اطلاعات بیشتر به فایل [LICENSE](LICENSE) مراجعه کنید.

---

**توضیح نهایی:**  
این پروژه نمونه‌ای جامع از یک سیستم رباتیک تعبیه‌شده است که با ترکیب چندین سنسور و مدارات کنترلی، یک تجربه جذاب و کاربردی در رباتیک ارائه می‌دهد. هدف از این پروژه، نمایش چگونگی تعامل هماهنگ سخت‌افزار و نرم‌افزار در سیستم‌های میکروکنترلری می‌باشد.
